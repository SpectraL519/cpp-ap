<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CPP-AP: CPP-AP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CPP-AP<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Command-line argument parser for C++20</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">CPP-AP</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a>Command-line argument parser for C++20</p>
<p><a href="https://github.com/SpectraL519/cpp-ap/actions/workflows/g++"><img src="https://github.com/SpectraL519/cpp-ap/actions/workflows/gpp.yaml/badge.svg" alt="g++" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/SpectraL519/cpp-ap/actions/workflows/clang++"><img src="https://github.com/SpectraL519/cpp-ap/actions/workflows/clang.yaml/badge.svg" alt="clang++" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/SpectraL519/cpp-ap/actions/workflows/test"><img src="https://github.com/SpectraL519/cpp-ap/actions/workflows/test.yaml/badge.svg" alt="test" style="pointer-events: none;" class="inline"/></a></p>
<p><br  />
</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>The <code>CPP-AP</code> library has been developed for the <em>Team Programming</em> course at the <em>Wroc≈Çaw University of Science and Technology</em>.</p>
<p>Faculty: <em>W04N - Faculty of Information and Communication Technology</em></p>
<p>Field of study: <em>Algorithmic Computer Science</em></p>
<p><br  />
</p>
<p>The goal of the project was to create a light, intuitive and simple to use command-line argument parser library for the <code>C++20</code> and newer standards.</p>
<p>The <code>CPP-AP</code> library does not require installing any additional tools or heavy libraries, like with <code>boost::program_options</code>. Much like with the <code>Doctest</code> framework - the only thing you need to do is copy the <code><a class="el" href="argument__parser_8hpp.html" title="CPP-AP library header file.">argument_parser.hpp</a></code> file into the include directory of your project and you're set to go.</p>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Table of contents</h1>
<ul>
<li>Tutorial<ul>
<li>The parser class</li>
<li>Adding arguments</li>
<li>Argument parameters</li>
<li>Default arguments</li>
<li>Parsing arguments</li>
</ul>
</li>
<li>Examples</li>
<li>Dev notes<ul>
<li>Requirements</li>
<li>Building and testing</li>
</ul>
</li>
<li>Documentation</li>
<li>Compiler support</li>
<li>Licence</li>
</ul>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Tutorial</h1>
<p>To use the <code>CPP-AP</code> library in your project, copy the <a href="include/ap/argument_parser.hpp">argument_parser.hpp</a> file into your include directory, e.g. <code>include/ap</code>. No other setup is necessary - you only need to include this header in your code:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="argument__parser_8hpp.html">ap/argument_parser.hpp</a>&gt;</span></div>
<div class="ttc" id="aargument__parser_8hpp_html"><div class="ttname"><a href="argument__parser_8hpp.html">argument_parser.hpp</a></div><div class="ttdoc">CPP-AP library header file.</div></div>
</div><!-- fragment --><p>If you wish to use the library across multiple projects without copying the header into each one, you can copy it into a common directory and add the <code>-I &lt;argument-parser-dir&gt;</code> option when compiling your project.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
The parser class</h2>
<p>To use the argument parser in your code you need to use the <code><a class="el" href="classap_1_1argument__parser.html" title="Main argument parser class.">ap::argument_parser</a></code> class.</p>
<p>The parameters you can specify for a parser's instance are:</p><ul>
<li>Program name</li>
<li>Program description</li>
<li>Arguments</li>
</ul>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_class" href="classap_1_1argument__parser.html">ap::argument_parser</a> parser;</div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a292f57fab96ab699430091f00d2284be">program_name</a>(<span class="stringliteral">&quot;Name of the program&quot;</span>)</div>
<div class="line">      .<a class="code hl_function" href="classap_1_1argument__parser.html#aa99ab13f56fe422b61754c3e7099620c">program_description</a>(<span class="stringliteral">&quot;Description of the program&quot;</span>);</div>
<div class="ttc" id="aclassap_1_1argument__parser_html"><div class="ttname"><a href="classap_1_1argument__parser.html">ap::argument_parser</a></div><div class="ttdoc">Main argument parser class.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01176">argument_parser.hpp:1176</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a292f57fab96ab699430091f00d2284be"><div class="ttname"><a href="classap_1_1argument__parser.html#a292f57fab96ab699430091f00d2284be">ap::argument_parser::program_name</a></div><div class="ttdeci">argument_parser &amp; program_name(std::string_view name)</div><div class="ttdoc">Set the program name.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01198">argument_parser.hpp:1198</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_aa99ab13f56fe422b61754c3e7099620c"><div class="ttname"><a href="classap_1_1argument__parser.html#aa99ab13f56fe422b61754c3e7099620c">ap::argument_parser::program_description</a></div><div class="ttdeci">argument_parser &amp; program_description(std::string_view description)</div><div class="ttdoc">Set the program description.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01208">argument_parser.hpp:1208</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Adding arguments</h2>
<p>The parser supports both positional and optional arguments. Both argument types are identified by their names represented as strings. Arguments can be defined with only a primary name or with a primary and a secondary (short) name.</p>
<p><b>NOTE:</b> The basic rules of parsing positional and optional arguments are described in the Parsing arguments section.</p>
<p>To add an argument to the parameter's configurations use the following syntax:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">parser.add_&lt;positional/optional&gt;_argument&lt;value_type&gt;(<span class="stringliteral">&quot;argument_name&quot;</span>);</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">parser.add_&lt;positional/optional&gt;_argument&lt;value_type&gt;(<span class="stringliteral">&quot;argument_name&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>);</div>
</div><!-- fragment --><p><b>NOTE:</b> The library supports any argument value types which meet the following requirements:</p><ul>
<li>The <code>std::ostream&amp; operator&lt;&lt;</code> must be overloaded for a value type</li>
<li>The type must have a copy constructor and an assignment operator</li>
</ul>
<p><b>NOTE:</b> If the <code>value_type</code> is not provided, <code>std::string</code> will be used.</p>
<p>You can also add boolean flags:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ad6df56f78b4ab9cc63b989cbcef60f90">add_flag</a>(<span class="stringliteral">&quot;enable_some_option&quot;</span>, <span class="stringliteral">&quot;eso&quot;</span>).help(<span class="stringliteral">&quot;enables option: some option&quot;</span>);</div>
<div class="line"><span class="comment">/* equivalent to:</span></div>
<div class="line"><span class="comment">parser.add_optional_argument&lt;bool&gt;(&quot;enable_some_option&quot;, &quot;eso&quot;)</span></div>
<div class="line"><span class="comment">      .default_value(false)</span></div>
<div class="line"><span class="comment">      .implicit_value(true)</span></div>
<div class="line"><span class="comment">      .nargs(0)</span></div>
<div class="line"><span class="comment">      .help(&quot;enables option: some option&quot;);</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_ad6df56f78b4ab9cc63b989cbcef60f90"><div class="ttname"><a href="classap_1_1argument__parser.html#ad6df56f78b4ab9cc63b989cbcef60f90">ap::argument_parser::add_flag</a></div><div class="ttdeci">argument::optional_argument&lt; bool &gt; &amp; add_flag(std::string_view name)</div><div class="ttdoc">Add a boolean flag to the parser.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01323">argument_parser.hpp:1323</a></div></div>
</div><!-- fragment --><p>Boolean flags store <code>true</code> by default but you can specify whether the flag should store <code>true</code> or <code>false</code> when used: </p><div class="fragment"><div class="line"> ++</div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ad6df56f78b4ab9cc63b989cbcef60f90">add_flag</a>&lt;<span class="keyword">false</span>&gt;(<span class="stringliteral">&quot;disable_another_option&quot;</span>, <span class="stringliteral">&quot;dao&quot;</span>).help(<span class="stringliteral">&quot;disables option: another option&quot;</span>);</div>
<div class="line"><span class="comment">/* equivalent to:</span></div>
<div class="line"><span class="comment">parser.add_optional_argument&lt;bool&gt;(&quot;disable_another_option&quot;, &quot;dao&quot;)</span></div>
<div class="line"><span class="comment">      .default_value(true)</span></div>
<div class="line"><span class="comment">      .implicit_value(false)</span></div>
<div class="line"><span class="comment">      .nargs(0)</span></div>
<div class="line"><span class="comment">      .help(&quot;disables option: another option&quot;);</span></div>
<div class="line"><span class="comment">*/</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Argument parameters</h2>
<p><b>Common parameters</b></p>
<p>Parameters which can be specified for both positional and optional arguments include:</p>
<ul>
<li><p class="startli"><code>help</code> - the argument's description which will be printed when printing the parser class instance.</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a2894b59a058690f04b6f8784e6e0cc6f">add_positional_argument</a>&lt;std::size_t&gt;(<span class="stringliteral">&quot;number&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>)</div>
<div class="line">         .help(<span class="stringliteral">&quot;a positive integer value&quot;</span>);</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a2894b59a058690f04b6f8784e6e0cc6f"><div class="ttname"><a href="classap_1_1argument__parser.html#a2894b59a058690f04b6f8784e6e0cc6f">ap::argument_parser::add_positional_argument</a></div><div class="ttdeci">argument::positional_argument&lt; T &gt; &amp; add_positional_argument(std::string_view name)</div><div class="ttdoc">Add a positional argument to the parser.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01246">argument_parser.hpp:1246</a></div></div>
</div><!-- fragment --></li>
<li><p class="startli"><code>choices</code> - a list of valid argument values. The <code>choices</code> parameter takes a <code>const std::vector&lt;value_type&gt;&amp;</code> as an argument.</p>
<p class="startli"><b>NOTE:</b> To use the <code>choices</code> the <code>value_type</code> must overload the equaility comparison operator: <code>==</code>;</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>&lt;<span class="keywordtype">char</span>&gt;(<span class="stringliteral">&quot;method&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>).choices({<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>});</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_afe8630c3ada065826bd6656ab8e8ff48"><div class="ttname"><a href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">ap::argument_parser::add_optional_argument</a></div><div class="ttdeci">argument::optional_argument&lt; T &gt; &amp; add_optional_argument(std::string_view name)</div><div class="ttdoc">Add an optional argument to the parser.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01287">argument_parser.hpp:1287</a></div></div>
</div><!-- fragment --></li>
<li><p class="startli"><code>action</code> - a function performed after reading an argument's value.</p>
<p class="startli">Actions are represented as functions, which take the argument's value as an argument. There are two types of actions:</p><ul>
<li>Void actions - <code>void(value_type&amp;)</code></li>
<li>Valued actions - <code>value_type(const value_type&amp;)</code></li>
</ul>
<p class="startli">The default action is an empty void function.</p>
<p class="startli">Actions can be used to modify a value parsed from the command-line: </p><div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;denominator&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>)</div>
<div class="line">         .action&lt;ap::void_action&gt;([](<span class="keywordtype">double</span>&amp; value) { value = 1. / value; });</div>
</div><!-- fragment --><p> or en equivalent valued action: </p><div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;denominator&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>)</div>
<div class="line">         .action&lt;ap::valued_action&gt;([](<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; value) { <span class="keywordflow">return</span> 1. / value; });</div>
</div><!-- fragment --><p class="startli">Actions can also be used to perform some value checking logic, e.g. the predefined <code>check_file_exists_action</code> which checks if a file with a given name exists: </p><div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">         .action&lt;<a class="code hl_struct" href="structap_1_1void__action.html">ap::void_action</a>&gt;(<a class="code hl_variable" href="namespaceap_1_1action.html#aa39450f221658c018eed73ea2a7cbecf">ap::action::check_file_exists_action</a>);</div>
<div class="ttc" id="anamespaceap_1_1action_html_aa39450f221658c018eed73ea2a7cbecf"><div class="ttname"><a href="namespaceap_1_1action.html#aa39450f221658c018eed73ea2a7cbecf">ap::action::check_file_exists_action</a></div><div class="ttdeci">detail::callable_type&lt; ap::void_action, std::string &gt; check_file_exists_action</div><div class="ttdoc">Predefined action for file name handling arguments. Checks whether a file with the given name exists.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00302">argument_parser.hpp:302</a></div></div>
<div class="ttc" id="astructap_1_1void__action_html"><div class="ttname"><a href="structap_1_1void__action.html">ap::void_action</a></div><div class="ttdoc">Defines void argument action traits.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00255">argument_parser.hpp:255</a></div></div>
</div><!-- fragment --></li>
</ul>
<p><b>Optional argument specific parameters</b></p>
<ul>
<li><code>required</code> - if this option is set for an argument, failure of parsing it's value will result in an error. <div class="fragment"><div class="line">++</div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>).required();</div>
</div><!-- fragment --></li>
<li><code>bypass_required</code> - if this option is set for an argument, parsing it's value will overrite the <code>required</code> option for other optional arguments and all positional arguments.</li>
<li><p class="startli"><code>nargs</code> - sets the allowed number of values to be parsed for an argument. This can be set as a:</p><ul>
<li>Concrete number: <code>c++ parser.add_optional_argument("input", "i").nargs(1); </code></li>
<li>Bound range: <code>c++ parser.add_optional_argument("input", "i").nargs(1, 3); </code></li>
<li>Partially bound range: <code>c++ parser.add_optional_argument("input", "i").nargs(ap::nargs::at_least(1)); // n &gt;= 1 parser.add_optional_argument("input", "i").nargs(ap::nargs::more_than(1)); // n &gt; 1 parser.add_optional_argument("input", "i").nargs(ap::nargs::less_than(5)); // n &lt; 5 parser.add_optional_argument("input", "i").nargs(ap::nargs::up_to(5)); // n &lt;= 5 </code></li>
<li>Unbound range: <code>c++ parser.add_optional_argument("input", "i").nargs(ap::nargs::any()); </code></li>
</ul>
<p class="startli"><b>NOTE:</b> The default nargs value is <code>1</code>.</p>
</li>
<li><code>default_value</code> - the default value for an argument which will be used if no values for this argument are parsed <div class="fragment"><div class="line">++</div>
<div class="line">   parser.add_opitonal_argument(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>).default_value(<span class="stringliteral">&quot;out.txt&quot;</span>);</div>
</div><!-- fragment --></li>
<li><code>implicit_value</code> - a value which will be set for an argument if only it's flag is parsed from the command-line but no value follows <div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// program.cpp</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;save&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>)</div>
<div class="line">         .implicit_value(<span class="stringliteral">&quot;out.txt&quot;</span>)</div>
<div class="line">         .help(<span class="stringliteral">&quot;save the program&#39;s output to a file&quot;</span>);</div>
</div><!-- fragment --> In this example if you run the program with only a <code>-s</code> or <code>--save</code> flag and no value, the value will be set to <code>out.txt</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Default arguments</h2>
<p>The <code>CPP-AP</code> library has a few default arguments defined. To add a default argument to the parser use the following:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">// add positional arguments - pass a std::vector of default positional arguments</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#af397c597d729c0dac84b33f7acf3300f">default_positional_arguments</a>({...});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// add optional arguments - pass a std::vector of default optional arguments</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#af397c597d729c0dac84b33f7acf3300f">default_positional_arguments</a>({...});</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_af397c597d729c0dac84b33f7acf3300f"><div class="ttname"><a href="classap_1_1argument__parser.html#af397c597d729c0dac84b33f7acf3300f">ap::argument_parser::default_positional_arguments</a></div><div class="ttdeci">argument_parser &amp; default_positional_arguments(const std::vector&lt; default_argument::positional &gt; &amp;args)</div><div class="ttdoc">Set default positional arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01218">argument_parser.hpp:1218</a></div></div>
</div><!-- fragment --><p>The supported default arguments are:</p><ul>
<li><code>positional::input</code>: <div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a2894b59a058690f04b6f8784e6e0cc6f">add_positional_argument</a>&lt;std::string&gt;(<span class="stringliteral">&quot;input&quot;</span>)</div>
<div class="line">         .action&lt;ap::void_action&gt;(<a class="code hl_variable" href="namespaceap_1_1action.html#aa39450f221658c018eed73ea2a7cbecf">ap::action::check_file_exists_action</a>)</div>
<div class="line">         .help(<span class="stringliteral">&quot;Input file path&quot;</span>);</div>
</div><!-- fragment --></li>
<li><code>positional::output</code>: <div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a2894b59a058690f04b6f8784e6e0cc6f">add_positional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>).help(<span class="stringliteral">&quot;Output file path&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>optional::help</code>: </p><div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ad6df56f78b4ab9cc63b989cbcef60f90">add_flag</a>(<span class="stringliteral">&quot;help&quot;</span>, <span class="stringliteral">&quot;h&quot;</span>).bypass_required().help(<span class="stringliteral">&quot;Display help message&quot;</span>);</div>
</div><!-- fragment --><p class="startli"><b>Note:</b> As of now the <em>on flag action</em> functionality is not implemented in the library - this will be added in a future release. To properly use the help argument in the current release add the following right beneath the <code>parser.parse_args(argc, argv)</code> try-catch block: </p><div class="fragment"><div class="line">++</div>
<div class="line">   <span class="keywordflow">if</span> (parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ac8f07fb15ddbcc16c5fe2e03996d36a5">has_value</a>(<span class="stringliteral">&quot;help&quot;</span>)) {</div>
<div class="line">       std::cout &lt;&lt; parser &lt;&lt; std::endl;</div>
<div class="line">       std::exit(EXIT_SUCCESS);</div>
<div class="line">   }</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_ac8f07fb15ddbcc16c5fe2e03996d36a5"><div class="ttname"><a href="classap_1_1argument__parser.html#ac8f07fb15ddbcc16c5fe2e03996d36a5">ap::argument_parser::has_value</a></div><div class="ttdeci">bool has_value(std::string_view arg_name) const</div><div class="ttdoc">Check if an argument has a value.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01367">argument_parser.hpp:1367</a></div></div>
</div><!-- fragment --></li>
<li><code>optional::input</code> and <code>optional::multi_input</code>: <div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// input - equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">         .required()</div>
<div class="line">         .nargs(1)</div>
<div class="line">         .action&lt;<a class="code hl_struct" href="structap_1_1void__action.html">ap::void_action</a>&gt;(<a class="code hl_variable" href="namespaceap_1_1action.html#aa39450f221658c018eed73ea2a7cbecf">ap::action::check_file_exists_action</a>)</div>
<div class="line">         .help(<span class="stringliteral">&quot;Input file path&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// multi_input - equivalen to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">         .required()</div>
<div class="line">         .nargs(<a class="code hl_function" href="namespaceap_1_1nargs.html#ae990f2da51b340bfebc1a11a1334dda6">ap::nargs::at_least</a>(1))</div>
<div class="line">         .action&lt;<a class="code hl_struct" href="structap_1_1void__action.html">ap::void_action</a>&gt;(<a class="code hl_variable" href="namespaceap_1_1action.html#aa39450f221658c018eed73ea2a7cbecf">ap::action::check_file_exists_action</a>)</div>
<div class="line">         .help(<span class="stringliteral">&quot;Input files paths&quot;</span>);</div>
<div class="ttc" id="anamespaceap_1_1nargs_html_ae990f2da51b340bfebc1a11a1334dda6"><div class="ttname"><a href="namespaceap_1_1nargs.html#ae990f2da51b340bfebc1a11a1334dda6">ap::nargs::at_least</a></div><div class="ttdeci">range at_least(const range::count_type n)</div><div class="ttdoc">range class builder function. Creates a range [n, inf].</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00206">argument_parser.hpp:206</a></div></div>
</div><!-- fragment --></li>
<li><code>optional::output</code> and <code>optional::multi_output</code>: <div class="fragment"><div class="line">++</div>
<div class="line">   <span class="comment">// output - equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>)</div>
<div class="line">         .required()</div>
<div class="line">         .nargs(1)</div>
<div class="line">         .help(<span class="stringliteral">&quot;Output file path&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// multi_otput - equivalent to:</span></div>
<div class="line">   parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>)</div>
<div class="line">         .required()</div>
<div class="line">         .nargs(<a class="code hl_function" href="namespaceap_1_1nargs.html#ae990f2da51b340bfebc1a11a1334dda6">ap::nargs::at_least</a>(1))</div>
<div class="line">         .help(<span class="stringliteral">&quot;Output files paths&quot;</span>);</div>
</div><!-- fragment --></li>
</ul>
<p><b>NOTE:</b> The <code>argument_parser::default_&lt;positional/optional&gt;_arguments</code> functions will be modified to use a variadic argument list instead of a <code>std::vector</code> in a future release.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Parsing arguments</h2>
<p>To parse the command-line arguments use the <code>argument_parser::parse_args</code> method:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">// power.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="argument__parser_8hpp.html">ap/argument_parser.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <span class="comment">// create the parser class instance</span></div>
<div class="line">    <a class="code hl_class" href="classap_1_1argument__parser.html">ap::argument_parser</a> parser;</div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a292f57fab96ab699430091f00d2284be">program_name</a>(<span class="stringliteral">&quot;power calculator&quot;</span>)</div>
<div class="line">          .<a class="code hl_function" href="classap_1_1argument__parser.html#aa99ab13f56fe422b61754c3e7099620c">program_description</a>(<span class="stringliteral">&quot;calculates the value of an expression: base &amp; exponent&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// add arguments</span></div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a2894b59a058690f04b6f8784e6e0cc6f">add_positional_argument</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;base&quot;</span>).help(<span class="stringliteral">&quot;the exponentation base value&quot;</span>);</div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afe8630c3ada065826bd6656ab8e8ff48">add_optional_argument</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;exponent&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>)</div>
<div class="line">          .nargs(<a class="code hl_function" href="namespaceap_1_1nargs.html#a9895f2357ee892545b1f821e57079018">ap::nargs::any</a>())</div>
<div class="line">          .help(<span class="stringliteral">&quot;the exponent value&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#afec29dfead9f970258b518a918c2d491">default_optional_arguments</a>({ap::default_argument::optional::help});</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// parse command-line arguments</span></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        parser.<a class="code hl_function" href="classap_1_1argument__parser.html#af1ba2d20583be8bfa9cfb61eac4b602a">parse_args</a>(argc, argv);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classap_1_1argument__parser__error.html">ap::argument_parser_error</a>&amp; err) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;[ERROR] : &quot;</span> &lt;&lt; err.what() &lt;&lt; std::endl &lt;&lt; parser &lt;&lt; std::endl;</div>
<div class="line">        std::exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// check for the help argument presence</span></div>
<div class="line">    <span class="keywordflow">if</span> (parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ac8f07fb15ddbcc16c5fe2e03996d36a5">has_value</a>(<span class="stringliteral">&quot;help&quot;</span>)) {</div>
<div class="line">        std::cout &lt;&lt; parser &lt;&lt; std::endl;</div>
<div class="line">        std::exit(EXIT_SUCCESS);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// check if any values for the `exponent` argument have been parsed</span></div>
<div class="line">    <span class="keywordflow">if</span> (not parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ac8f07fb15ddbcc16c5fe2e03996d36a5">has_value</a>(<span class="stringliteral">&quot;exponent&quot;</span>)) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;no exponent values given&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::exit(EXIT_SUCCESS);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> base = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">value</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;base&quot;</span>);</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;int&gt; exponent_values = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a80270803f7f3c59c3aeac9f6d33205ce">values</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;exponent&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">int</span> exponent : exponent_values) {</div>
<div class="line">        std::cout &lt;&lt; base &lt;&lt; <span class="stringliteral">&quot; ^ &quot;</span> &lt;&lt; exponent &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; std::pow(base, exponent) &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// compiled with:</span></div>
<div class="line"><span class="comment">// g++ -o power power.cpp -I &lt;cpp-ap-include-dir&gt;</span></div>
<div class="ttc" id="aclassap_1_1argument__parser__error_html"><div class="ttname"><a href="classap_1_1argument__parser__error.html">ap::argument_parser_error</a></div><div class="ttdoc">Base class for exceptions thrown by the argument parser.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00478">argument_parser.hpp:478</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a5a51e8b54c96d6bddbeabd9bc4ff7cb7"><div class="ttname"><a href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">ap::argument_parser::value</a></div><div class="ttdeci">T value(std::string_view arg_name) const</div><div class="ttdoc">Get the value of a typed argument.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01389">argument_parser.hpp:1389</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a80270803f7f3c59c3aeac9f6d33205ce"><div class="ttname"><a href="classap_1_1argument__parser.html#a80270803f7f3c59c3aeac9f6d33205ce">ap::argument_parser::values</a></div><div class="ttdeci">std::vector&lt; T &gt; values(std::string_view arg_name) const</div><div class="ttdoc">Get the values of a typed argument.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01410">argument_parser.hpp:1410</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_af1ba2d20583be8bfa9cfb61eac4b602a"><div class="ttname"><a href="classap_1_1argument__parser.html#af1ba2d20583be8bfa9cfb61eac4b602a">ap::argument_parser::parse_args</a></div><div class="ttdeci">void parse_args(int argc, char *argv[])</div><div class="ttdoc">Parse command-line arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01352">argument_parser.hpp:1352</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_afec29dfead9f970258b518a918c2d491"><div class="ttname"><a href="classap_1_1argument__parser.html#afec29dfead9f970258b518a918c2d491">ap::argument_parser::default_optional_arguments</a></div><div class="ttdeci">argument_parser &amp; default_optional_arguments(const std::vector&lt; default_argument::optional &gt; &amp;args)</div><div class="ttdoc">Set default optional arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l01231">argument_parser.hpp:1231</a></div></div>
<div class="ttc" id="anamespaceap_1_1nargs_html_a9895f2357ee892545b1f821e57079018"><div class="ttname"><a href="namespaceap_1_1nargs.html#a9895f2357ee892545b1f821e57079018">ap::nargs::any</a></div><div class="ttdeci">range any()</div><div class="ttdoc">range class builder function. Creates a range [0, inf].</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00241">argument_parser.hpp:241</a></div></div>
</div><!-- fragment --><p><b>Argument parsing rules:</b></p>
<ul>
<li><p class="startli">Positional arguments are parsed first, in the order they were defined in and without a flag.</p>
<p class="startli">In the example above the first command-line argument must be the value for <code>positional_argument</code>: </p><div class="fragment"><div class="line">./power 2</div>
<div class="line"># out:</div>
<div class="line"># no exponent values given</div>
</div><!-- fragment --><p class="startli"><b>NOTE:</b> For each positional argument there must be <b>exactly one value</b>. </p><div class="fragment"><div class="line">./test_program</div>
<div class="line"># out:</div>
<div class="line"># [ERROR] : No values parsed for a required argument [base]</div>
<div class="line"># power calculator</div>
<div class="line"># calculates the value of an expression: base &amp; exponent</div>
<div class="line">#         [base] : the exponentation base value</div>
<div class="line">#         [exponent,e] : the exponent value</div>
<div class="line">#         [help,h] : Display help message</div>
</div><!-- fragment --></li>
<li><p class="startli">Optional arguments are parsed only with a flag: </p><div class="fragment"><div class="line">./power 2 --exponent 1 2 3</div>
<div class="line"># equivalent to: ./power 2 -e 1 2 3</div>
<div class="line"># out:</div>
<div class="line"># 2 ^ 1 = 2</div>
<div class="line"># 2 ^ 2 = 4</div>
<div class="line"># 2 ^ 3 = 8</div>
</div><!-- fragment --><p class="startli">You can use the flag for each command-line value: </p><div class="fragment"><div class="line">./power 2 -e 1 -e 2 -e 3</div>
</div><!-- fragment --><p class="startli">Not using a flag will result in an error: <code>shell ./power 2 1 2 3 @section autotoc_md9 out: @section autotoc_md10 [ERROR] : Failed to deduce the argument for the given value `1` @section autotoc_md11 power calculator @section autotoc_md12 calculates the value of an expression: base &amp; exponent @section autotoc_md13 [base] : the exponentation base value @section autotoc_md14 [exponent,e] : the exponent value @section autotoc_md15 [help,h] : Display help message </code></p>
</li>
</ul>
<p><b>NOTE:</b> The parser behaviour depends on the argument definitions. The argument parameters are described int the Argument parameters section.</p>
<p><br  />
 <br  />
</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Examples</h2>
<p>If you wish to test the parser functionality with some real examples then follow these steps:</p>
<p>Open your terminal in the project's example directory: </p><div class="fragment"><div class="line">cd &lt;project-root&gt;/example</div>
</div><!-- fragment --><p>The examples' source files are in the <code>&lt;project-root&gt;/example/src</code> directory.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Note:</b> Each source file is a sepparate example. </p>
</blockquote>
<p>Building the examples:</p>
<div class="fragment"><div class="line">cmake -B build</div>
<div class="line">cd build</div>
<div class="line">make</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><p>The compiled binaries will appear in the <code>&lt;project-root&gt;/example/build/bin</code> directory.</p>
<p><br  />
 <br  />
</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Dev notes</h2>
<h4><a class="anchor" id="autotoc_md18"></a>
Requirements:</h4>
<ul>
<li>Supported compiler (check compiler support here)</li>
<li>clang-format-17 (<a href="https://ubuntuhandbook.org/index.php/2023/09/how-to-install-clang-17-or-16-in-ubuntu-22-04-20-04/amp/?fbclid=IwAR1ZfJpoiitjwn8aMlKVWpFdkYmUqtaQwraJBju09v1gtc0jQANTgVeCuMY">ubuntu download tutorial</a>)</li>
</ul>
<p><br  />
</p>
<h4><a class="anchor" id="autotoc_md19"></a>
Building and testing:</h4>
<ol type="1">
<li><p class="startli">Build the testing executable:</p>
<div class="fragment"><div class="line">cd &lt;project-root&gt;/test/</div>
<div class="line">cmake -B build</div>
<div class="line">cd build</div>
<div class="line">make</div>
</div><!-- fragment --><p class="startli">or</p>
<div class="fragment"><div class="line">cd &lt;project-root&gt;/test/</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --></li>
<li><p class="startli">Run tests</p>
<p class="startli">Run all tests: </p><div class="fragment"><div class="line">cd &lt;project-root&gt;/test/build</div>
<div class="line">./test</div>
</div><!-- fragment --><p class="startli">Run a single test suite: </p><div class="fragment"><div class="line">./test -ts=&quot;&lt;test-suite-name&gt;&quot;</div>
</div><!-- fragment --><p class="startli">&gt; <b>Note</b>: Test suites in the project have the same name as the files they're in.</p>
</li>
<li>Tips and tricks:<ul>
<li><p class="startli">Changing the CMake generator:</p>
<p class="startli">If you wish for CMake to generate a different type of project, use the <code>-G</code> option, e.g. (building a Make project on Windows instead of a VS project): </p><div class="fragment"><div class="line">cmake -G &quot;Unix Makefiles&quot;</div>
</div><!-- fragment --></li>
</ul>
</li>
</ol>
<p><br  />
 <br  />
</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Documentation</h2>
<p>The documentation for this project can be generated using Doxygen:</p>
<ol type="1">
<li>Make sure you have <code>Doxygen</code> installed on your machine. If not you can download it from <a href="https://www.doxygen.nl/download.html">here</a>.</li>
<li><p class="startli">Generate the documentation:</p>
<p class="startli">Open your terminal and use the following instructions: </p><div class="fragment"><div class="line">cd &lt;project-root&gt;</div>
<div class="line">doxygen Doxyfile</div>
</div><!-- fragment --></li>
</ol>
<p><br  />
 <br  />
</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Compiler support</h2>
<p>As of now the project supports the <b>GNU G++</b> and <b>Clang++</b> compilers with <code>C++20</code> support on Linux and Windows.</p>
<p><br  />
 <br  />
</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Licence</h2>
<p>The <code>CPP-AP</code> project uses the <a href="https://opensource.org/license/mit/">MIT Licence</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
