<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CPP-AP: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CPP-AP<span id="projectnumber">&#160;2.0.1</span>
   </div>
   <div id="projectbrief">Command-line argument parser for C++20</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2tutorial.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="tutorial"></a></p><ul>
<li><a class="el" href="md_docs_2tutorial.html#setting-up-cpp-ap">Setting Up CPP-AP</a><ul>
<li><a class="el" href="md_docs_2tutorial.html#cmake-integration">CMake Integration</a></li>
<li><a class="el" href="md_docs_2tutorial.html#downloading-the-library">Downloading the Library</a></li>
</ul>
</li>
<li><a class="el" href="md_docs_2tutorial.html#the-parser-class">The Parser Class</a></li>
<li><a class="el" href="md_docs_2tutorial.html#adding-arguments">Adding Arguments</a></li>
<li><a class="el" href="md_docs_2tutorial.html#argument-parameters">Argument Parameters</a></li>
<li><a class="el" href="md_docs_2tutorial.html#default-arguments">Default Arguments</a></li>
<li><a class="el" href="md_docs_2tutorial.html#parsing-arguments">Parsing Arguments</a></li>
<li><a class="el" href="md_docs_2tutorial.html#retrieving-argument-values">Retrieving Argument Values</a></li>
<li><a class="el" href="md_docs_2tutorial.html#examples">Examples</a></li>
</ul>
<p><br  />
</p>
<h1><a class="anchor" id="setting-up-cpp-ap"></a>
Setting Up CPP-AP</h1>
<h2><a class="anchor" id="cmake-integration"></a>
CMake Integration</h2>
<p>For CMake projects you can simply fetch the library in your <code>CMakeLists.txt</code> file:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.12)</div>
<div class="line"> </div>
<div class="line">project(my_project LANGUAGES CXX)</div>
<div class="line"> </div>
<div class="line"># Include FetchContent module</div>
<div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line"># Fetch CPP-AP library</div>
<div class="line">FetchContent_Declare(</div>
<div class="line">    cpp-ap</div>
<div class="line">    GIT_REPOSITORY https://github.com/SpectraL519/cpp-ap.git</div>
<div class="line">    GIT_TAG master # here you can specify the desired tag or branch</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(cpp-ap)</div>
<div class="line"> </div>
<div class="line"># Define the executable for the project</div>
<div class="line">add_executable(my_project main.cpp)</div>
<div class="line"> </div>
<div class="line">set_target_properties(my_project PROPERTIES</div>
<div class="line">    CXX_STANDARD 20</div>
<div class="line">    CXX_STANDARD_REQUIRED YES</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Link against the cpp-ap (v2) library</div>
<div class="line">target_link_libraries(my_project PRIVATE cpp-ap-2)</div>
</div><!-- fragment --><h2><a class="anchor" id="downloading-the-library"></a>
Downloading the Library</h2>
<p>If you do not use CMake you can dowload the desired <a href="https://github.com/SpectraL519/cpp-ap/releases">library release</a>, extract it in a desired directory and simply add <code>&lt;cpp-ap-dir&gt;/include</code> to the include directories of your project.</p>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="the-parser-class"></a>
The Parser Class</h1>
<p>To use the argument parser in your code you need to use the <code><a class="el" href="classap_1_1argument__parser.html" title="Main argument parser class.">ap::argument_parser</a></code> class.</p>
<p>The parameters you can specify for a parser's instance are:</p>
<ul>
<li>Program name</li>
<li>Program description</li>
<li><a class="el" href="md_docs_2tutorial.html#adding-arguments">Arguments</a></li>
</ul>
<div class="fragment"><div class="line"><a class="code hl_class" href="classap_1_1argument__parser.html">ap::argument_parser</a> parser;</div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a61647eb07a661640d94d416dff69a9fe">program_name</a>(<span class="stringliteral">&quot;Name of the program&quot;</span>)</div>
<div class="line">      .<a class="code hl_function" href="classap_1_1argument__parser.html#a5935ee955cca241d6d4450326f9a92be">program_description</a>(<span class="stringliteral">&quot;Description of the program&quot;</span>);</div>
<div class="ttc" id="aclassap_1_1argument__parser_html"><div class="ttname"><a href="classap_1_1argument__parser.html">ap::argument_parser</a></div><div class="ttdoc">Main argument parser class.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00039">argument_parser.hpp:39</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a5935ee955cca241d6d4450326f9a92be"><div class="ttname"><a href="classap_1_1argument__parser.html#a5935ee955cca241d6d4450326f9a92be">ap::argument_parser::program_description</a></div><div class="ttdeci">argument_parser &amp; program_description(std::string_view description) noexcept</div><div class="ttdoc">Set the program description.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00066">argument_parser.hpp:66</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a61647eb07a661640d94d416dff69a9fe"><div class="ttname"><a href="classap_1_1argument__parser.html#a61647eb07a661640d94d416dff69a9fe">ap::argument_parser::program_name</a></div><div class="ttdeci">argument_parser &amp; program_name(std::string_view name) noexcept</div><div class="ttdoc">Set the program name.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00056">argument_parser.hpp:56</a></div></div>
</div><!-- fragment --><p><br  />
 <br  />
</p>
<h1><a class="anchor" id="adding-arguments"></a>
Adding Arguments</h1>
<p>The parser supports both positional and optional arguments. Both argument types are identified by their names represented as strings. Arguments can be defined with only a primary name or with a primary and a secondary (short) name.</p>
<blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>The basic rules of parsing positional and optional arguments are described in the <a class="el" href="md_docs_2tutorial.html#parsing-arguments">Parsing arguments</a> section. </p>
</blockquote>
<p>To add an argument to the parameter's configurations use the following syntax:</p>
<div class="fragment"><div class="line">parser.add_&lt;positional/optional&gt;_argument&lt;value_type&gt;(<span class="stringliteral">&quot;argument&quot;</span>);</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">parser.add_&lt;positional/optional&gt;_argument&lt;value_type&gt;(<span class="stringliteral">&quot;argument&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>);</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>The library supports any argument value types which meet the following requirements:</p>
<ul>
<li>The <code>std::ostream&amp; operator&lt;&lt;</code> is overloaded for the value type</li>
<li>The value type has a copy constructor and an assignment operator </li>
</ul>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;[!IMPORTANT]</p>
<p>If the <code>value_type</code> is not provided, <code>std::string</code> will be used. </p>
</blockquote>
<p>You can also add boolean flags:</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#aa340ed78fcdb698b73e105b04a4a5c14">add_flag</a>(<span class="stringliteral">&quot;enable_some_option&quot;</span>, <span class="stringliteral">&quot;eso&quot;</span>).help(<span class="stringliteral">&quot;enables option: some option&quot;</span>);</div>
<div class="line"><span class="comment">/* equivalent to:</span></div>
<div class="line"><span class="comment">parser.add_optional_argument&lt;bool&gt;(&quot;enable_some_option&quot;, &quot;eso&quot;)</span></div>
<div class="line"><span class="comment">      .default_value(false)</span></div>
<div class="line"><span class="comment">      .implicit_value(true)</span></div>
<div class="line"><span class="comment">      .nargs(0)</span></div>
<div class="line"><span class="comment">      .help(&quot;enables option: some option&quot;);</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_aa340ed78fcdb698b73e105b04a4a5c14"><div class="ttname"><a href="classap_1_1argument__parser.html#aa340ed78fcdb698b73e105b04a4a5c14">ap::argument_parser::add_flag</a></div><div class="ttdeci">argument::optional&lt; bool &gt; &amp; add_flag(std::string_view primary_name)</div><div class="ttdoc">Adds a boolean flag argument to the parser's configuration.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00204">argument_parser.hpp:204</a></div></div>
</div><!-- fragment --><p>Boolean flags store <code>true</code> by default but you can specify whether the flag should store <code>true</code> or <code>false</code> when used:</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#aa340ed78fcdb698b73e105b04a4a5c14">add_flag</a>&lt;<span class="keyword">false</span>&gt;(<span class="stringliteral">&quot;disable_another_option&quot;</span>, <span class="stringliteral">&quot;dao&quot;</span>).help(<span class="stringliteral">&quot;disables option: another option&quot;</span>);</div>
<div class="line"><span class="comment">/* equivalent to:</span></div>
<div class="line"><span class="comment">parser.add_optional_argument&lt;bool&gt;(&quot;disable_another_option&quot;, &quot;dao&quot;)</span></div>
<div class="line"><span class="comment">      .default_value(true)</span></div>
<div class="line"><span class="comment">      .implicit_value(false)</span></div>
<div class="line"><span class="comment">      .nargs(0)</span></div>
<div class="line"><span class="comment">      .help(&quot;disables option: another option&quot;);</span></div>
<div class="line"><span class="comment">*/</span></div>
</div><!-- fragment --><p><br  />
 <br  />
</p>
<h1><a class="anchor" id="argument-parameters"></a>
Argument Parameters</h1>
<h2><a class="anchor" id="common-parameters"></a>
Common Parameters</h2>
<p>Parameters which can be specified for both positional and optional arguments include:</p>
<ul>
<li><p class="startli"><code>help</code> - the argument's description which will be printed when printing the parser class instance.</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a95afc3f8d90d0f18e10a3d328d2e888d">add_positional_argument</a>&lt;std::size_t&gt;(<span class="stringliteral">&quot;number&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>)</div>
<div class="line">      .help(<span class="stringliteral">&quot;a positive integer value&quot;</span>);</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a95afc3f8d90d0f18e10a3d328d2e888d"><div class="ttname"><a href="classap_1_1argument__parser.html#a95afc3f8d90d0f18e10a3d328d2e888d">ap::argument_parser::add_positional_argument</a></div><div class="ttdeci">argument::positional&lt; T &gt; &amp; add_positional_argument(std::string_view primary_name)</div><div class="ttdoc">Adds a positional argument to the parser's configuration.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00128">argument_parser.hpp:128</a></div></div>
</div><!-- fragment --></li>
<li><p class="startli"><code>choices</code> - a list of valid argument values. The <code>choices</code> parameter takes as an argument an instance of <code>std::initializer_list</code> or any <code>std::ranges::range</code> type such that its value type is convertible to the argument's <code>value_type</code>.</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>&lt;<span class="keywordtype">char</span>&gt;(<span class="stringliteral">&quot;method&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>).choices({<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>});</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a3841ee5aafb1bef6434fd790f6fa96d6"><div class="ttname"><a href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">ap::argument_parser::add_optional_argument</a></div><div class="ttdeci">argument::optional&lt; T &gt; &amp; add_optional_argument(std::string_view primary_name)</div><div class="ttdoc">Adds a positional argument to the parser's configuration.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00167">argument_parser.hpp:167</a></div></div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!IMPORTANT]</p>
<p>The <code>choices</code> function can be used only if the argument's <code>value_type</code> is equality comparable (defines the <code>==</code> operator). </p>
</blockquote>
<ul>
<li><p class="startli"><code>action</code> - a function performed after reading an argument's value. Actions are represented as functions, which take the argument's value as an argument. There are two types of actions:</p><ul>
<li><p class="startli"><code>modify</code> actions | <code>void(value_type&amp;)</code> - applied to the initialized value of an argument.</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>&lt;std::string&gt;(<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>)</div>
<div class="line">      .action&lt;ap::action_type::modify&gt;([](std::string&amp; name) { name[0] = std::toupper(name[0]); });</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>transform</code> actions | <code>value_type(const value_type&amp;)</code> - applied to the parsed value. The returned value will be used to initialize the argument's value.</p>
<p class="startli">```cpp std::string to_lower(std::string s) { for (auto&amp; c : s) c = static_cast&lt;char&gt;(std::tolower(c)); return s; }</p>
<p class="startli">parser.add_optional_argument&lt;std::string&gt;("key", "k") .action&lt;ap::action_type::transform&gt;(to_lower); ```</p>
</li>
</ul>
<p class="startli">Actions can also be used to perform some value checking logic instead of actualy modifying or transforming a value, as e.g. the predefined <code>check_file_exists</code> which verifies whether a file with a given name exists:</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">      .action&lt;<a class="code hl_struct" href="structap_1_1action__type_1_1modify.html">ap::action_type::modify</a>&gt;(ap::action::check_file_exists());</div>
<div class="ttc" id="astructap_1_1action__type_1_1modify_html"><div class="ttname"><a href="structap_1_1action__type_1_1modify.html">ap::action_type::modify</a></div><div class="ttdef"><b>Definition</b> <a href="specifiers_8hpp_source.html#l00038">specifiers.hpp:38</a></div></div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;<b>NOTE:</b> The default action is an empty <code>modify</code> action. </p>
</blockquote>
<h2><a class="anchor" id="parameters-specific-for-optional-arguments"></a>
Parameters Specific for Optional Arguments</h2>
<ul>
<li><p class="startli"><code>required</code> - if this option is set for an argument and it's value is not passed in the command-line, an exception will be thrown.</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>).required();</div>
</div><!-- fragment --></li>
<li><code>bypass_required</code> - if this option is set for an argument, parsing it's value will overrite the <code>required</code> option for other optional arguments and all positional arguments.</li>
<li><code>nargs</code> - sets the allowed number of values to be parsed for an argument. This can be set as a:<ul>
<li><p class="startli">Concrete number:</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>).nargs(1);</div>
</div><!-- fragment --></li>
<li><p class="startli">Bound range:</p>
<p class="startli"><code>cpp parser.add_optional_argument("input", "i").nargs(1, 3); </code></p>
</li>
<li><p class="startli">Partially bound range:</p>
<p class="startli"><code>cpp parser.add_optional_argument("input", "i").nargs(ap::nargs::at_least(1)); // n &gt;= 1 parser.add_optional_argument("input", "i").nargs(ap::nargs::more_than(1)); // n &gt; 1 parser.add_optional_argument("input", "i").nargs(ap::nargs::less_than(5)); // n &lt; 5 parser.add_optional_argument("input", "i").nargs(ap::nargs::up_to(5)); // n &lt;= 5 </code></p>
</li>
<li><p class="startli">Unbound range:</p>
<p class="startli"><code>cpp parser.add_optional_argument("input", "i").nargs(ap::nargs::any()); </code></p>
</li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>The default nargs value is <code>1</code>. </p>
</blockquote>
<ul>
<li><p class="startli"><code>default_value</code> - the default value for an argument which will be used if no values for this argument are parsed</p>
<div class="fragment"><div class="line">parser.add_opitonal_argument(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>).default_value(<span class="stringliteral">&quot;out.txt&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>implicit_value</code> - a value which will be set for an argument if only it's flag is parsed from the command-line but no value follows</p>
<div class="fragment"><div class="line"><span class="comment">// program.cpp</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;save&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>)</div>
<div class="line">      .implicit_value(<span class="stringliteral">&quot;out.txt&quot;</span>)</div>
<div class="line">      .help(<span class="stringliteral">&quot;save the program&#39;s output to a file&quot;</span>);</div>
</div><!-- fragment --><p class="startli">In this example if you run the program with only a <code>-s</code> or <code>--save</code> flag and no value, the value will be set to <code>out.txt</code>.</p>
</li>
</ul>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="default-arguments"></a>
Default Arguments</h1>
<p>The <code>CPP-AP</code> library defines several default arguments, which can be added to the parser's configuration as follows.</p>
<div class="fragment"><div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a0236f5dc871f7794a91d38e65210993f">default_positional_arguments</a>({...});</div>
<div class="line"><span class="comment">// here `...` represents a collection of ap::argument::default_positional values</span></div>
<div class="line"> </div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a0236f5dc871f7794a91d38e65210993f">default_positional_arguments</a>({...});</div>
<div class="line"><span class="comment">// here `...` represents a collection of ap::argument::default_optional values</span></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a0236f5dc871f7794a91d38e65210993f"><div class="ttname"><a href="classap_1_1argument__parser.html#a0236f5dc871f7794a91d38e65210993f">ap::argument_parser::default_positional_arguments</a></div><div class="ttdeci">argument_parser &amp; default_positional_arguments(const AR &amp;arg_discriminator_range) noexcept</div><div class="ttdoc">Set default positional arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00078">argument_parser.hpp:78</a></div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>These functions work with <code>std::initializer_list</code> and all other <code>std::ranges::range</code> types with the correct value type - <code>ap::argument::default_{positional/optional}</code> </p>
</blockquote>
<p>The available default arguments are:</p>
<ul>
<li><p class="startli"><code>default_positional::input</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a95afc3f8d90d0f18e10a3d328d2e888d">add_positional_argument</a>&lt;std::string&gt;(<span class="stringliteral">&quot;input&quot;</span>)</div>
<div class="line">      .action&lt;ap::action_type::modify&gt;(ap::action::check_file_exists())</div>
<div class="line">      .help(<span class="stringliteral">&quot;Input file path&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>default_positional::output</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a95afc3f8d90d0f18e10a3d328d2e888d">add_positional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>).help(<span class="stringliteral">&quot;Output file path&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>default_optional::help</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#aa340ed78fcdb698b73e105b04a4a5c14">add_flag</a>(<span class="stringliteral">&quot;help&quot;</span>, <span class="stringliteral">&quot;h&quot;</span>).bypass_required().help(<span class="stringliteral">&quot;Display help message&quot;</span>);</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>As of now the <em>on flag/use action</em> functionality is not implemented in the library - this will be added in a future release. To properly use the help argument in the current release add the, use the <code>parser.handle_help_action()</code> method after parsing the arguments. This would be equivalent to:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">value</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;help&quot;</span>)) {</div>
<div class="line">    std::cout &lt;&lt; parser &lt;&lt; std::endl;</div>
<div class="line">    std::exit(EXIT_SUCCESS);</div>
<div class="line">}</div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a5a51e8b54c96d6bddbeabd9bc4ff7cb7"><div class="ttname"><a href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">ap::argument_parser::value</a></div><div class="ttdeci">T value(std::string_view arg_name) const</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00322">argument_parser.hpp:322</a></div></div>
</div><!-- fragment --> </blockquote>
<ul>
<li><p class="startli"><code>default_optional::input</code> and <code>default_optional::multi_input</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// input - equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">      .required()</div>
<div class="line">      .nargs(1)</div>
<div class="line">      .action&lt;<a class="code hl_struct" href="structap_1_1action__type_1_1modify.html">ap::action_type::modify</a>&gt;(ap::action::check_file_exists())</div>
<div class="line">      .help(<span class="stringliteral">&quot;Input file path&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// multi_input - equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;input&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line">      .required()</div>
<div class="line">      .nargs(ap::nargs::at_least(1))</div>
<div class="line">      .action&lt;<a class="code hl_struct" href="structap_1_1action__type_1_1modify.html">ap::action_type::modify</a>&gt;(ap::action::check_file_exists())</div>
<div class="line">      .help(<span class="stringliteral">&quot;Input files paths&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><code>default_optional::output</code> and <code>default_optional::multi_output</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// output - equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>)</div>
<div class="line">      .required()</div>
<div class="line">      .nargs(1)</div>
<div class="line">      .help(<span class="stringliteral">&quot;Output file path&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// multi_otput - equivalent to:</span></div>
<div class="line">parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>(<span class="stringliteral">&quot;output&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>)</div>
<div class="line">      .required()</div>
<div class="line">      .nargs(ap::nargs::at_least(1))</div>
<div class="line">      .help(<span class="stringliteral">&quot;Output files paths&quot;</span>);</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!NOTE]</p>
<p>The <code>argument_parser::default_&lt;positional/optional&gt;_arguments</code> functions will be modified to use a variadic argument list instead of a <code>std::vector</code> in a future release. </p>
</blockquote>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="parsing-arguments"></a>
Parsing Arguments</h1>
<p>To parse the command-line arguments use the <code>void argument_parser::parse_args(const AR&amp; argv)</code> method, where <code>AR</code> must be a type that satisfies <code>std::ranges::range</code> and its value type is convertible to <code>std::string</code>.</p>
<p>The <code>argument_parser</code> class also defines the <code>void parse_args(int argc, char* argv[])</code> overload, which works directly with the <code>argc</code> and <code>argv</code> arguments of the <code>main</code> function.</p>
<blockquote class="doxtable">
<p>&zwj;[!IMPORTANT]</p>
<p>The <code>parse_args(argc, argv)</code> method ignores the first argument (the program name) and is equivalent to calling <code>parse_args(std::span(argv + 1, argc - 1))</code>. </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;[!TIP]</p>
<p>The <code>parse_args</code> functions may throw an <code><a class="el" href="classap_1_1argument__parser__exception.html" title="Base class for exceptions thrown by the argument parser.">ap::argument_parser_exception</a></code> if the provided command-line arguments do not match the expected configuration. To simplify error handling, the <code>argument_parser</code> class provides <code>try_parse_args</code> methods, which automatically catch these exceptions, print the error message, and exit with a failure status.</p>
<p>Internally, This is equivalent to:</p>
<div class="fragment"><div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#af1ba2d20583be8bfa9cfb61eac4b602a">parse_args</a>(...);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classap_1_1argument__parser__exception.html">ap::argument_parser_exception</a>&amp; err) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;[ERROR] : &quot;</span> &lt;&lt; err.what() &lt;&lt; std::endl &lt;&lt; parser &lt;&lt; std::endl;</div>
<div class="line">    std::exit(EXIT_FAILURE);</div>
<div class="line">}</div>
<div class="ttc" id="aclassap_1_1argument__parser__exception_html"><div class="ttname"><a href="classap_1_1argument__parser__exception.html">ap::argument_parser_exception</a></div><div class="ttdoc">Base class for exceptions thrown by the argument parser.</div><div class="ttdef"><b>Definition</b> <a href="exceptions_8hpp_source.html#l00019">exceptions.hpp:19</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_af1ba2d20583be8bfa9cfb61eac4b602a"><div class="ttname"><a href="classap_1_1argument__parser.html#af1ba2d20583be8bfa9cfb61eac4b602a">ap::argument_parser::parse_args</a></div><div class="ttdeci">void parse_args(int argc, char *argv[])</div><div class="ttdoc">Parses the command-line arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00234">argument_parser.hpp:234</a></div></div>
</div><!-- fragment --> </blockquote>
<div class="fragment"><div class="line"><span class="comment">// power.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;ap/argument_parser.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <span class="comment">// create the parser class instance</span></div>
<div class="line">    <a class="code hl_class" href="classap_1_1argument__parser.html">ap::argument_parser</a> parser;</div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a61647eb07a661640d94d416dff69a9fe">program_name</a>(<span class="stringliteral">&quot;power calculator&quot;</span>)</div>
<div class="line">          .<a class="code hl_function" href="classap_1_1argument__parser.html#a5935ee955cca241d6d4450326f9a92be">program_description</a>(<span class="stringliteral">&quot;calculates the value of an expression: base ^ exponent&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// add arguments</span></div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a95afc3f8d90d0f18e10a3d328d2e888d">add_positional_argument</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;base&quot;</span>).help(<span class="stringliteral">&quot;the exponentation base value&quot;</span>);</div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a3841ee5aafb1bef6434fd790f6fa96d6">add_optional_argument</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;exponent&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>)</div>
<div class="line">          .nargs(ap::nargs::any())</div>
<div class="line">          .help(<span class="stringliteral">&quot;the exponent value&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#aa17bf6579d8343e8e593e43f105f64fc">default_optional_arguments</a>({ap::argument::default_optional::help});</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// parse command-line arguments</span></div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#aabce061e6d7294e4b5b71c6e885fdabe">try_parse_args</a>(argc, argv);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// handle the `help` argument</span></div>
<div class="line">    parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ab4ab3440a777fb52e4c123611024bc5b">handle_help_action</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// check if any values for the `exponent` argument have been parsed</span></div>
<div class="line">    <span class="keywordflow">if</span> (not parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a6c2a8328773c498294fafd746ce4a364">has_value</a>(<span class="stringliteral">&quot;exponent&quot;</span>)) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;no exponent values given&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::exit(EXIT_SUCCESS);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> base = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">value</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;base&quot;</span>);</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;int&gt; exponent_values = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a80270803f7f3c59c3aeac9f6d33205ce">values</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;exponent&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">int</span> exponent : exponent_values) {</div>
<div class="line">        std::cout &lt;&lt; base &lt;&lt; <span class="stringliteral">&quot; ^ &quot;</span> &lt;&lt; exponent &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; std::pow(base, exponent) &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// compiled with:</span></div>
<div class="line"><span class="comment">// g++ -o power power.cpp -I &lt;cpp-ap-include-dir&gt;</span></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a6c2a8328773c498294fafd746ce4a364"><div class="ttname"><a href="classap_1_1argument__parser.html#a6c2a8328773c498294fafd746ce4a364">ap::argument_parser::has_value</a></div><div class="ttdeci">bool has_value(std::string_view arg_name) const noexcept</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00302">argument_parser.hpp:302</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_a80270803f7f3c59c3aeac9f6d33205ce"><div class="ttname"><a href="classap_1_1argument__parser.html#a80270803f7f3c59c3aeac9f6d33205ce">ap::argument_parser::values</a></div><div class="ttdeci">std::vector&lt; T &gt; values(std::string_view arg_name) const</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00369">argument_parser.hpp:369</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_aa17bf6579d8343e8e593e43f105f64fc"><div class="ttname"><a href="classap_1_1argument__parser.html#aa17bf6579d8343e8e593e43f105f64fc">ap::argument_parser::default_optional_arguments</a></div><div class="ttdeci">argument_parser &amp; default_optional_arguments(const AR &amp;arg_discriminator_range) noexcept</div><div class="ttdoc">Set default optional arguments.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00102">argument_parser.hpp:102</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_aabce061e6d7294e4b5b71c6e885fdabe"><div class="ttname"><a href="classap_1_1argument__parser.html#aabce061e6d7294e4b5b71c6e885fdabe">ap::argument_parser::try_parse_args</a></div><div class="ttdeci">void try_parse_args(int argc, char *argv[])</div><div class="ttdoc">Parses the command-line arguments and exits on error.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00260">argument_parser.hpp:260</a></div></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_ab4ab3440a777fb52e4c123611024bc5b"><div class="ttname"><a href="classap_1_1argument__parser.html#ab4ab3440a777fb52e4c123611024bc5b">ap::argument_parser::handle_help_action</a></div><div class="ttdeci">void handle_help_action() const noexcept</div><div class="ttdoc">Handles the help argument logic.</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00291">argument_parser.hpp:291</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="argument-parsing-rules"></a>
Argument Parsing Rules:</h2>
<ul>
<li><p class="startli">Positional arguments are parsed first, in the order they were defined in and without a flag.</p>
<p class="startli">In the example above the first command-line argument must be the value for the <code>positional</code> argument:</p>
<div class="fragment"><div class="line">./power 2</div>
<div class="line"># out:</div>
<div class="line"># no exponent values given</div>
</div><!-- fragment --><div class="fragment"><div class="line">./power</div>
<div class="line"># out:</div>
<div class="line"># [ERROR] : No values parsed for a required argument [base]</div>
<div class="line"># power calculator</div>
<div class="line"># calculates the value of an expression: base ^ exponent</div>
<div class="line">#         [base] : the exponentation base value</div>
<div class="line">#         [exponent,e] : the exponent value</div>
<div class="line">#         [help,h] : Display help message</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!IMPORTANT]</p>
<p>For each positional argument there must be <b>exactly one value</b>. </p>
</blockquote>
<ul>
<li><p class="startli">Optional arguments are parsed only with a flag:</p>
<div class="fragment"><div class="line">./power 2 --exponent 1 2 3</div>
<div class="line"># equivalent to: ./power 2 -e 1 2 3</div>
<div class="line"># out:</div>
<div class="line"># 2 ^ 1 = 2</div>
<div class="line"># 2 ^ 2 = 4</div>
<div class="line"># 2 ^ 3 = 8</div>
</div><!-- fragment --><p class="startli">You can use the flag for each command-line value:</p>
<div class="fragment"><div class="line">./power 2 -e 1 -e 2 -e 3</div>
</div><!-- fragment --><p class="startli">Not using a flag will result in an error:</p>
<div class="fragment"><div class="line">./power 2 1 2 3</div>
<div class="line"># out:</div>
<div class="line"># [ERROR] : Failed to deduce the argument for the given value `1`</div>
<div class="line"># power calculator</div>
<div class="line"># calculates the value of an expression: base &amp; exponent</div>
<div class="line">#         [base] : the exponentation base value</div>
<div class="line">#         [exponent,e] : the exponent value</div>
<div class="line">#         [help,h] : Display help message</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;[!IMPORTANT]</p>
<p>The parser behaviour depends on the argument definitions. The argument parameters are described int the <a class="el" href="md_docs_2tutorial.html#argument-parameters">Argument parameters</a> section. </p>
</blockquote>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="retrieving-argument-values"></a>
Retrieving Argument Values</h1>
<p>You can retrieve the argument's value with:</p>
<div class="fragment"><div class="line">(<span class="keyword">const</span>) <span class="keyword">auto</span> value = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a5a51e8b54c96d6bddbeabd9bc4ff7cb7">value</a>&lt;value_type&gt;(<span class="stringliteral">&quot;argument_name&quot;</span>); <span class="comment">// (1)</span></div>
<div class="line">(<span class="keyword">const</span>) <span class="keyword">auto</span> value = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#ad2da93974b1e272fb54aa8fb6cc93e21">value_or</a>&lt;value_type&gt;(<span class="stringliteral">&quot;argument_name&quot;</span>, default_value); <span class="comment">// (2)</span></div>
<div class="ttc" id="aclassap_1_1argument__parser_html_ad2da93974b1e272fb54aa8fb6cc93e21"><div class="ttname"><a href="classap_1_1argument__parser.html#ad2da93974b1e272fb54aa8fb6cc93e21">ap::argument_parser::value_or</a></div><div class="ttdeci">T value_or(std::string_view arg_name, U &amp;&amp;default_value) const</div><div class="ttdef"><b>Definition</b> <a href="argument__parser_8hpp_source.html#l00344">argument_parser.hpp:344</a></div></div>
</div><!-- fragment --><ol type="1">
<li><p class="startli">This will return the value parsed for the given argument.</p>
<p class="startli">For optional arguments this will return the argument's predefined value if no value has been parsed. Additionaly, if more than one value has been parsed for an optional argument, this function will return the first parsed value.</p>
</li>
<li>When a value has been parsed for the argument, the behaviour is the same as in case **(1)**. Otherwise, this will return <code>value_type{std::forward&lt;U&gt;(default_value)}</code> (where <code>U</code> is the deducted type of <code>default_value</code>), if:<ul>
<li>There is no value parsed for a positional argument</li>
<li>There is no parsed values and no predefined values for an optional arrument</li>
</ul>
</li>
</ol>
<p><br  />
</p>
<p>Additionally for optional arguments, you can use:</p>
<div class="fragment"><div class="line">(<span class="keyword">const</span>) std::vector&lt;value_type&gt; values = parser.<a class="code hl_function" href="classap_1_1argument__parser.html#a80270803f7f3c59c3aeac9f6d33205ce">values</a>&lt;value_type&gt;(<span class="stringliteral">&quot;argument_name&quot;</span>);</div>
</div><!-- fragment --><p>which returns a <code>vector</code> containing all values parsed for the given argument.</p>
<p><br  />
 <br  />
</p>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<p>The library usage examples / demo projects can be found in the <a href="https://github.com/SpectraL519/cpp-ap-demo">cpp-ap-demo</a> repository. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 11 2025 for CPP-AP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
